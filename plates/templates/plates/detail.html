{% extends 'base.html' %}

{% load plates_extras %}
{% load static %}

{% block title %}
Detail
{% endblock title %}

{% block style %}
<link rel="stylesheet" href="{% static "plates/detail.css" %}">
{% endblock style %}



{% block content %}
<div>
  <div class="d-flex flex-row">
    <div class="headimg" style="margin: 5px;">
      <img class="card-img-top" src="{% static 'plates/no_image.png' %}" alt="대체이미지">
    </div>
    <div class="headimg" style="margin: 5px;">
      <img class="card-img-top" src="{% static 'plates/no_image.png' %}" alt="대체이미지">
    </div>
    <div class="headimg" style="margin: 5px;">
      <img class="card-img-top" src="{% static 'plates/no_image.png' %}" alt="대체이미지">
    </div>
    <div class="headimg" style="margin: 5px;">
      <img class="card-img-top" src="{% static 'plates/no_image.png' %}" alt="대체이미지">
    </div>
  </div>
  <div class="d-flex flex-row">
    <div style="width: 70%;">
      <div>
        <div class="d-flex justify-content-between">
          <div class="d-flex flex-row">
            <h1> {{ post.title }} </h1>
            <h2 class="mx-3" style="line-height:55px;"> {{post|get_rating}} </h2>
          </div>
          <div class="d-flex flex-row Detail__Title__Sub">
            
            <button class="Detail__Title__Review">
              <a href="{% url 'plates:review_create' post.pk %}" class="mx-3">
                <i class="Detail__Title__ReviewImg"></i>
                <span class="Detail__Title__ReviewText">리뷰쓰기</span>
              </a>
            </button>
            
            <div>
              <form action="{% url 'plates:likes' post.pk %}" method="POST">
                {% csrf_token %}
                {% if request.user in post.like_users.all %}
                <input class="Detail__Title__BookmarkImg" type="submit" value=''><span class="Detail__Title__BookmarkText">가고싶다</span></input>
                {% else %}
                <input class="Detail__Title__BookmarkImg" type="submit" value=''><span class="Detail__Title__BookmarkText">안가고싶다</span></input>
                {% endif %}
              </form>

              
            </div>
            
          </div>
        </div>
        <div class="Detail__Status">
          <span>방문 수 /</span>
          <span>리뷰 수 {{reviews|length}} / </span>
          <span>즐겨찾기 수</span>
        </div>
      </div>
      <hr>
      <div>
        <table>
          <tbody>
            <tr>
              <td>주소</td>
              <td>{{ post.loc }}</td>
            </tr>
            <tr>
              <td>전화번호</td>
              <td>{{ post.phone_number }}</td>
            </tr>
            <tr>
              <td>음식 종류</td>
              <td>{{ post.restaurant_type }}</td>
            </tr>
            <tr>
              <td>주차</td>
              <td>{{ post.parking }}</td>
            </tr>
            <tr>
              <td>가격대</td>
              <td>{{ post.price_range }}</td>
            </tr>
            <tr>
              <td>휴무일</td>
              <td>{{ post.closed_days }}</td>
            </tr>
          </tbody>
        </table>
        <div class="text-end">업데이트:{{ post.updated_at }}</div>
        <hr>
        <table>
          <tr>
            <td>식당소개</td>
            <td>{{ post.description }}</td>
          </tr>
        </table>
        <hr>
        <div>
          <div class="d-flex justify-content-between">
            <div>
            리뷰 ({{ reviews|length }})
            </div>
            <div>
              전체({{ reviews|length }}) / <a href="{% url 'plates:detail' post.pk %}?taste_evaluation=good">맛있다()</a> / <a href="{% url 'plates:detail' post.pk %}?taste_evaluation=normal">괜찮다()</a> / <a href="{% url 'plates:detail' post.pk %}?taste_evaluation=bad">별로()</a>
            </div>
            <div>
              
            </div>
          </div>
          <br>
          <div>
            {% for review in reviews %}
            <div class="d-flex flex-row">
              <p>{{ review.title }}</p>
              <div style="margin-left: 30px;">
                <p>{{ review.created_at }}
                <p>{{ review.content }}</p>
              </div>
            </div>
            <hr>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    <div class="text-center detail_sidevar">
      <div id="map" style="width:100%; height:300px;"></div>
      <div>주변 인기 식당</div>
      <div>이 식당 관련 태그</div>  
    </div>
    
  </div>
</div>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d3a80ca4c67db3a146bfd38d3aeab33b"></script>
<script type="text/javascript" src="/static/plates/detail.js"></script>
{% endblock content %}


