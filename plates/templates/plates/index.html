{% extends 'base.html' %}
{% load plates_extras %}
{% load static %}

{% block style %}
<style>
  .img-size {
    width: 220px;
    height: 150px;
  }

  .title-font {
    font-size: 1.3rem;
    font-weight: 800;
    color: #555;
  }

  .rating {
    line-height: 36px;
    font-size: 1.37rem;
    font-weight: 600;
    color: #ff792a;
  }

  .no-rating {
    line-height: 36px;
    font-size: 1.37rem;
    color: #e9e9e9;
  }

  .loc-font {
    font-size: 0.9rem;
    color: #9b9b9b;
  }
</style>
{% endblock style %}

{% block title %}
Index
{% endblock title %}

{% block content %}

<div>
  <div>
    <a href="{% url 'plates:create' %}">게시글 작성</a>
  </div>

  <div class="d-flex container">
    <div class="row row-cols-2 row-cols-md-4">
      {% for post in posts %}
        <a href="{% url 'plates:detail' post.pk %}" style="text-decoration: none;">
          <div class="col card border-0 m-3" >
            {% if post.post_images.first %}
              <img class="card-img-top rounded-0 img-size" src="{{ post.post_images.first.image.url }}" alt="img">

            {% else %}
              <img class="card-img-top rounded-0 img-size" src="{% static 'plates/no_image.png' %}" alt="대체이미지">
            {% endif %}

            <div class="card-body" style="width: 220px;">
              <div class="d-flex">
                <div class="me-3 title-font text-truncate">{{ post.title }}</div>
                {% if post|get_rating != 0.0 %}
                  <div class="rating">{{ post|get_rating }}</div>
                {% else %}
                  <div class="no-rating">0.0</div>
                {% endif %}
              </div>
              <div class="loc-font text-truncate">{{ post.loc }} - {{ post.restaurant_type}}</div>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>    
</div>

{% include 'footer.html' %}

{% endblock content %}

